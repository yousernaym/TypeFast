<Page
    x:Class="TyperUWP.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TyperUWP"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
	Loaded="Page_Loaded"
	xmlns:extensions="using:Microsoft.Toolkit.Uwp.UI.Extensions"
	>
	<!--xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"-->
	<Page.Resources>
		<local:TimeLimitConverter x:Key="TimeLimitConverter"/>
		
	</Page.Resources>
	
	<Grid>
		<StackPanel Orientation="Vertical">
			<RelativePanel Background="#ff112266" Padding="0,7,0,7" >
				<StackPanel RelativePanel.AlignLeftWithPanel="True" Orientation="Horizontal"  Margin="5,0,0,0">
					<AppBarButton Icon="Add" x:Name="newTextBtn" Label="New text" AccessKey="N" Click="NewTextBtn_Click" IsTabStop="False" AllowFocusOnInteraction="False" VerticalAlignment="Center" HorizontalAlignment="Right"/>
					<AppBarButton Icon="Delete" x:Name="deleteTextBtn" AccessKey="D" Label="Delete text" Click="DeleteTextBtn_Click"  IsTabStop="False" AllowFocusOnInteraction="False" VerticalAlignment="Center" HorizontalAlignment="Right"/>
				</StackPanel>
				<StackPanel x:Name="infoPanel" RelativePanel.AlignHorizontalCenterWithPanel="True" CornerRadius="5" Padding="10,1,1,0" Orientation="Horizontal" Background="#ff050a15" HorizontalAlignment="Center" Margin="0,0,30,0">
					<TextBlock x:Name="correctCharsText" Margin="0,0,40,0" FontSize="20"/>
					<TextBlock x:Name="incorrectCharsText" Margin="0,0,40,0" FontSize="20"/>
					<TextBlock x:Name="fixedCharsText" Margin="0,0,40,0" FontSize="20"/>
					<TextBlock x:Name="wpmText" Margin="0,0,40,0" FontSize="20" Foreground="Yellow"/>
					<TextBlock x:Name="accuracyText" Margin="0,0,30,0" FontSize="20" Foreground="Yellow"/>
					<!--<local:TextBlockEx x:Name="timeText" CornerRadius="5" Padding="10,0,10,0" FontSize="20"/>-->
					<Button x:Name="timeText" CornerRadius="5" Padding="7,0,8,0" FontSize="20" IsTabStop="False" >
						<Button.Flyout>
							<Flyout x:Name="timeLimitFlyout" Opened="TimeLimitFlyout_Opened" Closed="TimeLimitFlyout_Closed">
								<StackPanel Orientation="Horizontal">
									<TextBlock Text="Time limit:" Margin="0,0,10,0" VerticalAlignment="Center" />
									<TextBox x:Name="timeLimitTb" Text="{x:Bind text.TimeLimit, Mode=TwoWay, Converter={StaticResource TimeLimitConverter}}" KeyDown="TimeLimitTb_KeyDown" CharacterReceived="TimeLimitTb_CharacterReceived" SelectionChanging="TimeLimitTb_SelectionChanging" SelectionChanged="TimeLimitTb_SelectionChanged" BeforeTextChanging="TimeLimitTb_BeforeTextChanging" />
									<!--extensions:TextBoxMask.CustomMask="5:[0-5]" extensions:TextBoxMask.Mask="99:59" extensions:TextBoxMask.PlaceHolder="0"/>-->
								</StackPanel>
							</Flyout>
						</Button.Flyout>
					</Button>
				</StackPanel>
				<Button Content="A" FontSize="30" FontFamily="Times New Roman" RelativePanel.AlignRightWithPanel="True" RelativePanel.AlignVerticalCenterWithPanel="True" Margin="0,0,5,0" IsTabStop="False" Background="#40000000">
					<Button.Flyout>
						<Flyout x:Name="fontStyleFlyout" Opened="FontStyleFlyout_Opened" Closed="FontStyleFlyout_Closed">
							<StackPanel Orientation="Horizontal" RelativePanel.AlignRightWithPanel="True" VerticalAlignment="Center" RelativePanel.AlignVerticalCenterWithPanel="True">
								<ComboBox x:Name="fontCombo" VerticalAlignment="Center" SelectionChanged="FontCombo_SelectionChanged" AllowFocusOnInteraction="True"/>
								<TextBox x:Name="fontSizeTb" VerticalAlignment="Center" Width="70" MaxLength="3" TextChanged="FontSizeTb_TextChanged" BeforeTextChanging="FontSizeTb_BeforeTextChanging" AllowFocusOnInteraction="True"/>
								<Grid Width="40" Height="30" Margin="10,0,0,0">
									<Button x:Name="textColorBtn" Background="White"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
										<Button.Flyout>
											<Flyout>
												<ColorPicker x:Name="textColorPicker" Color="{x:Bind text.Foreground, Mode=TwoWay}" ColorChanged="TextColorPicker_ColorChanged"/>
											</Flyout>									
										</Button.Flyout>
									</Button>
									<!--<Border Background="White" Margin="3,3,3,3"/>-->
								</Grid>
								<Grid Width="40" Height="30" Margin="0,0,5,0">
									<Button x:Name="textBkgColorBtn" Background="Black" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
										<Button.Flyout>
											<Flyout>
												<ColorPicker x:Name="textBkgColorPicker" Color="{x:Bind text.Background, Mode=TwoWay}" ColorChanged="TextBkgColorPicker_ColorChanged"/>
											</Flyout>
										</Button.Flyout>
									</Button>
									<!--<Border Background="Black" Margin="3,3,3,3"/>-->

								</Grid>
							</StackPanel>
						</Flyout>
					</Button.Flyout>
				</Button>
				
			</RelativePanel>
			<Grid x:Name ="textPanel" Padding="0,5,0,5" Margin="0,40,0,40">
				<Grid.ColumnDefinitions>
					<ColumnDefinition />
					<ColumnDefinition />
				</Grid.ColumnDefinitions>
				<Grid.ContextFlyout>
					<MenuFlyout>
						<MenuFlyoutItem x:Name="textCmPaste" Text="Paste" Click="TextCmPaste_Click" >
							<MenuFlyoutItem.KeyboardAccelerators>
								<KeyboardAccelerator Modifiers="Control" Key="V" />
							</MenuFlyoutItem.KeyboardAccelerators>
						</MenuFlyoutItem>
					</MenuFlyout>
				</Grid.ContextFlyout>
				<StackPanel x:Name="writtenTextPanel" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center"/>
				<StackPanel x:Name="unwrittenTextPanel" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="1" >
					<local:TextBlockEx x:Name="currentCharControl" Foreground="Black" Background="White"/>
					<TextBlock x:Name="unwrittenTextControl"/>
				</StackPanel>
			</Grid>
			<StackPanel Background="#ff001144" CornerRadius="5" Padding="0,0,0,0" Margin="0,0,0,0" HorizontalAlignment="Center" Orientation="Horizontal">
				<!--<TextBlock Text="Texts:" VerticalAlignment="Center"/>-->
				<AppBarButton Icon="Refresh" x:Name="resetBtn" AccessKey="R" Label="Reset" Click="ResetBtn_Click" AllowFocusOnInteraction="False" IsTabStop="False" Margin="0,0,0,0" HorizontalAlignment="Center"/>
				<AppBarToggleButton Icon="Shuffle" x:Name="shuffleBtn" AccessKey="S" Label="Shuffle" IsTabStop="False" VerticalAlignment="Center" IsChecked="True"/>
			</StackPanel>
			<ComboBox x:Name="textsCombo" AccessKey="T" MinWidth="200" SelectionChanged="TextsCombo_SelectionChanged" VerticalAlignment="Center" IsTabStop="False" Margin="0,20,0,0" HorizontalAlignment="Center"/>
		</StackPanel>
	</Grid>
</Page>
